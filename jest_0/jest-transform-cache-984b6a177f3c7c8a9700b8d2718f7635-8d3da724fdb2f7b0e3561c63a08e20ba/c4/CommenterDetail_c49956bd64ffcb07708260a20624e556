/* istanbul ignore next */'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var /* istanbul ignore next */_react = require('react'); /* istanbul ignore next */var _react2 = _interopRequireDefault(_react);
var /* istanbul ignore next */_meteor = require('meteor/meteor');
var /* istanbul ignore next */_session = require('meteor/session');
var /* istanbul ignore next */_reactMeteorData = require('meteor/react-meteor-data');


var /* istanbul ignore next */_commenters = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/api/collections/commenters'); /* istanbul ignore next */var _commenters2 = _interopRequireDefault(_commenters);
var /* istanbul ignore next */_settings = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/api/collections/settings'); /* istanbul ignore next */var _settings2 = _interopRequireDefault(_settings);


var /* istanbul ignore next */_BackgroundImageHolder = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/shared/BackgroundImageHolder'); /* istanbul ignore next */var _BackgroundImageHolder2 = _interopRequireDefault(_BackgroundImageHolder);
var /* istanbul ignore next */_LoadingPage = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/loading/LoadingPage'); /* istanbul ignore next */var _LoadingPage2 = _interopRequireDefault(_LoadingPage);
var /* istanbul ignore next */_CommenterReferenceWorks = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/commenters/CommenterReferenceWorks'); /* istanbul ignore next */var _CommenterReferenceWorks2 = _interopRequireDefault(_CommenterReferenceWorks);
var /* istanbul ignore next */_CommenterVisualizations = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/commenters/CommenterVisualizations'); /* istanbul ignore next */var _CommenterVisualizations2 = _interopRequireDefault(_CommenterVisualizations);
var /* istanbul ignore next */_CommentsRecent = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/commentary/comments/CommentsRecent'); /* istanbul ignore next */var _CommentsRecent2 = _interopRequireDefault(_CommentsRecent);


var /* istanbul ignore next */_utils = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/lib/utils'); /* istanbul ignore next */var _utils2 = _interopRequireDefault(_utils);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self, call) {if (!self) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call && (typeof call === "object" || typeof call === "function") ? call : self;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;} // api
// components
// lib
var CommenterDetail = function (_React$Component) {_inherits(CommenterDetail, _React$Component);

















	function /* istanbul ignore next */CommenterDetail(props) {/* istanbul ignore next */_classCallCheck(this, CommenterDetail);var _this = _possibleConstructorReturn(this, (CommenterDetail.__proto__ || Object.getPrototypeOf(CommenterDetail)).call(this,
		props));

		/* istanbul ignore next */_this.state = {
			readMoreBio: false };


		// methods:
		/* istanbul ignore next */_this.toggleReadMoreBio = /* istanbul ignore next */_this.toggleReadMoreBio.bind( /* istanbul ignore next */_this); /* istanbul ignore next */return _this;
	}_createClass(CommenterDetail, [{ key: 'toggleReadMoreBio', value: function toggleReadMoreBio()

		{/* istanbul ignore next */var
			readMoreBio = this.state.readMoreBio;

			this.setState({
				readMoreBio: !readMoreBio });

		} }, { key: 'render', value: function render()

		{/* istanbul ignore next */var _props =
			this.props,commenter = _props.commenter,settings = _props.settings,avatarUrl = _props.avatarUrl,isTest = _props.isTest; /* istanbul ignore next */var
			readMoreBio = this.state.readMoreBio;

			if (commenter) {
				/* istanbul ignore next */_utils2.default.setTitle( /* istanbul ignore next */commenter.name + ' | ' + settings.title);
				/* istanbul ignore next */_utils2.default.setDescription( /* istanbul ignore next */_utils2.default.trunc(commenter.bio, 120));
				/* istanbul ignore next */_utils2.default.setMetaImage(avatarUrl);
			}

			return (
				commenter ?
				/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'page page-commenter-detail' },
					/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'content primary' },
						/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'section', /* istanbul ignore next */{ className: 'block header cover parallax' },
							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_BackgroundImageHolder2.default, /* istanbul ignore next */{
								imgSrc: '/images/capitals.jpg' }),

							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'container v-align-transform' },
								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'grid inner' },
									/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'center-content' },
										/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'page-title-wrap' },
											/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'h2', /* istanbul ignore next */{ className: 'page-title ' },
												commenter.name)))))),






						/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'section', /* istanbul ignore next */{ className: 'page-content' },

							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'commenter-image' },
								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'img', /* istanbul ignore next */{ src: avatarUrl, alt: commenter.name })),


							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: /* istanbul ignore next */'user-bio ' + (readMoreBio ? 'user-bio--read-more' : '') },

								commenter.bio ?
								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ dangerouslySetInnerHTML: { __html: commenter.bio } }) :

								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'p', /* istanbul ignore next */null, /* istanbul ignore next */'There is no biography information for this user yet.')),




							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{
									className: /* istanbul ignore next */'read-more-toggle\n\t\t\t\t\t\t\t\t' + (
									readMoreBio ? 'read-more-toggle-expanded' : '') },

								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'hr', /* istanbul ignore next */null),
								commenter.bio && commenter.bio.length > 500 ?

								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{
										className: 'read-more-button',
										onClick: this.toggleReadMoreBio },

									readMoreBio ?
									/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'span', /* istanbul ignore next */{ className: 'read-less-text' }, /* istanbul ignore next */'Show Less') :



									/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'span', /* istanbul ignore next */{ className: 'read-more-text' }, /* istanbul ignore next */'Read More')) :





								null),



							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_CommenterVisualizations2.default, /* istanbul ignore next */{
								commenter: commenter,
								isTest: isTest }),


							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'br', /* istanbul ignore next */null),
							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'br', /* istanbul ignore next */null),
							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'br', /* istanbul ignore next */null),
							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'hr', /* istanbul ignore next */null)),


						/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_CommenterReferenceWorks2.default, /* istanbul ignore next */{
							commenter: commenter }),


						/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_CommentsRecent2.default, /* istanbul ignore next */null))) :



				/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_LoadingPage2.default, /* istanbul ignore next */null));


		} }]);return CommenterDetail;}( /* istanbul ignore next */_react2.default.Component); /* istanbul ignore next */CommenterDetail.propTypes = { commenter: /* istanbul ignore next */_react2.default.PropTypes.shape({ name: /* istanbul ignore next */_react2.default.PropTypes.string.isRequired, bio: /* istanbul ignore next */_react2.default.PropTypes.string }), avatarUrl: /* istanbul ignore next */_react2.default.PropTypes.string, settings: /* istanbul ignore next */_react2.default.PropTypes.shape({ title: /* istanbul ignore next */_react2.default.PropTypes.string.isRequired }).isRequired, isTest: /* istanbul ignore next */_react2.default.PropTypes.bool }; /* istanbul ignore next */CommenterDetail.defaultProps = { commenter: null, avatarUrl: null, isTest: false }; /* istanbul ignore next */exports.default =


/* istanbul ignore next */(0, _reactMeteorData.createContainer)(function ( /* istanbul ignore next */_ref) {/* istanbul ignore next */var slug = _ref.slug;
	var settingsHandle = /* istanbul ignore next */_meteor.Meteor.subscribe('settings.tenant', /* istanbul ignore next */_session.Session.get('tenantId'));
	var commentersHandle = /* istanbul ignore next */_meteor.Meteor.subscribe('commenters.slug', slug, /* istanbul ignore next */_session.Session.get('tenantId'));
	var avatarUrl = /* istanbul ignore next */void 0;

	var commenter = /* istanbul ignore next */_commenters2.default.findOne({ slug: slug });

	if (commenter && commenter.avatar) {
		avatarUrl = commenter.avatar.src;
	}

	return {
		commenter: commenter,
		avatarUrl: avatarUrl,
		settings: /* istanbul ignore next */_settings2.default.findOne(),
		ready: settingsHandle.ready() && commentersHandle.ready() };

}, CommenterDetail);