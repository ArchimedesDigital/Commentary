/* istanbul ignore next */'use strict';Object.defineProperty(exports, "__esModule", { value: true });var /* istanbul ignore next */_react = require('react'); /* istanbul ignore next */var _react2 = _interopRequireDefault(_react);
var /* istanbul ignore next */_meteor = require('meteor/meteor');
var /* istanbul ignore next */_session = require('meteor/session');
var /* istanbul ignore next */_reactMeteorData = require('meteor/react-meteor-data');

var /* istanbul ignore next */_lib = require('react-masonry-component/lib'); /* istanbul ignore next */var _lib2 = _interopRequireDefault(_lib);


var /* istanbul ignore next */_referenceWorks = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/api/collections/referenceWorks'); /* istanbul ignore next */var _referenceWorks2 = _interopRequireDefault(_referenceWorks);


var /* istanbul ignore next */_ReferenceWorkTeaser = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/referenceWorks/ReferenceWorkTeaser'); /* istanbul ignore next */var _ReferenceWorkTeaser2 = _interopRequireDefault(_ReferenceWorkTeaser);


var /* istanbul ignore next */_utils = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/lib/utils'); /* istanbul ignore next */var _utils2 = _interopRequireDefault(_utils);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };} // components


var ReferenceWorksList = /* istanbul ignore next */_react2.default.createClass({ /* istanbul ignore next */displayName: 'ReferenceWorksList',

	propTypes: {
		commenterId: /* istanbul ignore next */_react2.default.PropTypes.string,
		referenceWorks: /* istanbul ignore next */_react2.default.PropTypes.array }, /* istanbul ignore next */


	renderReferenceWorks: function renderReferenceWorks() {
		return this.props.referenceWorks.map(function (referenceWork, i) /* istanbul ignore next */{return (
				/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_ReferenceWorkTeaser2.default, /* istanbul ignore next */{
					key: i,
					referenceWork: referenceWork }));});


	}, /* istanbul ignore next */

	render: function render() {/* istanbul ignore next */var
		referenceWorks = this.props.referenceWorks;
		var masonryOptions = {
			isFitWidth: true,
			transitionDuration: 300 };


		if (!referenceWorks) {
			return null;
		}

		return (
			/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */null,
				referenceWorks.length ?
				/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_lib2.default, /* istanbul ignore next */{
						options: masonryOptions,
						className: 'reference-works-list' },

					this.renderReferenceWorks()) :


				/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'p', /* istanbul ignore next */{ className: 'no-results no-results-reference-works' }, /* istanbul ignore next */'No reference works found.')));



	} }); // lib
// api


var ReferenceWorksListContainer = /* istanbul ignore next */(0, _reactMeteorData.createContainer)(function ( /* istanbul ignore next */_ref) {/* istanbul ignore next */var commenterId = _ref.commenterId;
	// SUBSCRIPTIONS:
	var query = {};
	if (commenterId) {
		query.authors = commenterId;
		/* istanbul ignore next */_meteor.Meteor.subscribe('referenceWorks.commenterId', commenterId, /* istanbul ignore next */_session.Session.get('tenantId'));
	} else {
		/* istanbul ignore next */_meteor.Meteor.subscribe('referenceWorks', /* istanbul ignore next */_session.Session.get('tenantId'));
	}

	// FETCH DATA:
	var referenceWorks = /* istanbul ignore next */_referenceWorks2.default.find(query, { sort: { title: 1 } }).fetch();

	return {
		referenceWorks: referenceWorks };

}, ReferenceWorksList); /* istanbul ignore next */exports.default =

ReferenceWorksListContainer;