/* istanbul ignore next */'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var /* istanbul ignore next */_react = require('react'); /* istanbul ignore next */var _react2 = _interopRequireDefault(_react);
var /* istanbul ignore next */_meteor = require('meteor/meteor');


var /* istanbul ignore next */_OAuthButtons = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/auth/OAuthButtons'); /* istanbul ignore next */var _OAuthButtons2 = _interopRequireDefault(_OAuthButtons);
var /* istanbul ignore next */_PWDLoginForm = require('/Users/Tyler/Desktop/AHCIP/ahcip/imports/ui/components/auth/PWDLoginForm'); /* istanbul ignore next */var _PWDLoginForm2 = _interopRequireDefault(_PWDLoginForm);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self, call) {if (!self) {throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call && (typeof call === "object" || typeof call === "function") ? call : self;}function _inherits(subClass, superClass) {if (typeof superClass !== "function" && superClass !== null) {throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;} // components:


var ESCAPE_KEY = 27; /* istanbul ignore next */var


ModalLogin = function (_React$Component) {_inherits(ModalLogin, _React$Component);










	function /* istanbul ignore next */ModalLogin(props) {/* istanbul ignore next */_classCallCheck(this, ModalLogin);var _this = _possibleConstructorReturn(this, (ModalLogin.__proto__ || Object.getPrototypeOf(ModalLogin)).call(this,
		props));

		/* istanbul ignore next */_this.state = {
			errorMsg: '',
			errorSocial: '' };


		// methods:
		/* istanbul ignore next */_this._handleKeyDown = /* istanbul ignore next */_this._handleKeyDown.bind( /* istanbul ignore next */_this);
		/* istanbul ignore next */_this.handleLogin = /* istanbul ignore next */_this.handleLogin.bind( /* istanbul ignore next */_this);
		/* istanbul ignore next */_this.handleLoginFacebook = /* istanbul ignore next */_this.handleLoginFacebook.bind( /* istanbul ignore next */_this);
		/* istanbul ignore next */_this.handleLoginGoogle = /* istanbul ignore next */_this.handleLoginGoogle.bind( /* istanbul ignore next */_this);
		/* istanbul ignore next */_this.handleLoginTwitter = /* istanbul ignore next */_this.handleLoginTwitter.bind( /* istanbul ignore next */_this); /* istanbul ignore next */return _this;
	}_createClass(ModalLogin, [{ key: 'componentWillMount', value: function componentWillMount()

		{
			document.addEventListener('keydown', this._handleKeyDown);
		} }, { key: 'componentWillUnmount', value: function componentWillUnmount()

		{
			document.removeEventListener('keydown', this._handleKeyDown);
		} }, { key: '_handleKeyDown', value: function _handleKeyDown(

		event) {/* istanbul ignore next */var

			closeModal = this.props.closeModal;

			if (event.keyCode === ESCAPE_KEY) closeModal();
		} }, { key: 'handleLogin', value: function handleLogin(

		email, password) {/* istanbul ignore next */var _this2 = this;
			/* istanbul ignore next */_meteor.Meteor.loginWithPassword(email, password, function (err) {
				if (!err) {
					/* istanbul ignore next */_this2.props.closeModal();

				} else {
					/* istanbul ignore next */_this2.setState({
						errorMsg: 'Invalid email or password' });

				}
			});
		} }, { key: 'handleLoginFacebook', value: function handleLoginFacebook()

		{/* istanbul ignore next */var _this3 = this;
			/* istanbul ignore next */_meteor.Meteor.loginWithFacebook({}, function (err) {
				if (!err) {
					/* istanbul ignore next */_this3.props.closeModal();
				} else {
					/* istanbul ignore next */_this3.setState({
						errorSocial: /* istanbul ignore next */'Error with signing in with Facebook: ' + err.message });

				}
			});
		} }, { key: 'handleLoginGoogle', value: function handleLoginGoogle()

		{/* istanbul ignore next */var _this4 = this;
			/* istanbul ignore next */_meteor.Meteor.loginWithGoogle({}, function (err) {
				if (!err) {
					/* istanbul ignore next */_this4.props.closeModal();
				} else {
					/* istanbul ignore next */_this4.setState({
						errorSocial: /* istanbul ignore next */'Error with signing in with Google: ' + err.message });

				}
			});
		} }, { key: 'handleLoginTwitter', value: function handleLoginTwitter()

		{/* istanbul ignore next */var _this5 = this;
			/* istanbul ignore next */_meteor.Meteor.loginWithTwitter({}, function (err) {
				if (!err) {
					/* istanbul ignore next */_this5.props.closeModal();
				} else {
					/* istanbul ignore next */_this5.setState({
						errorSocial: /* istanbul ignore next */'Error with signing in with Twitter: ' + err.message });

				}
			});
		} }, { key: 'render', value: function render()

		{/* istanbul ignore next */var _props =

			this.props,lowered = _props.lowered,closeModal = _props.closeModal; /* istanbul ignore next */var _state =
			this.state,errorSocial = _state.errorSocial,errorMsg = _state.errorMsg;

			return (
				/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */null,
					! /* istanbul ignore next */_meteor.Meteor.userId() &&
					/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{
							className: /* istanbul ignore next */'ahcip-modal-login\n\t\t\t\t\t\tahcip-modal ahcip-login-signup ' + (
							lowered ? ' lowered' : '') },

						/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{
								className: 'close-modal paper-shadow',
								onClick: closeModal },

							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'i', /* istanbul ignore next */{ className: 'mdi mdi-close' })),

						/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'modal-inner' },
							/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'at-form' },

								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'at-title' },
									/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'h3', /* istanbul ignore next */null, /* istanbul ignore next */'Sign In')),


								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'span', /* istanbul ignore next */{ className: 'error-text' },
									errorSocial),


								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_OAuthButtons2.default, /* istanbul ignore next */{
									handleFacebook: this.handleLoginFacebook,
									handleGoogle: this.handleLoginGoogle,
									handleTwitter: this.handleLoginTwitter }),


								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'at-sep' },
									/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'strong', /* istanbul ignore next */null, /* istanbul ignore next */'OR')),


								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_PWDLoginForm2.default, /* istanbul ignore next */{
									login: this.handleLogin,
									errorMsg: errorMsg }),


								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'at-signup-link' },
									/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'p', /* istanbul ignore next */null, /* istanbul ignore next */'Don\'t have an account? ',
										/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'a', /* istanbul ignore next */{ href: '/sign-up', id: 'at-signUp', className: 'at-link at-signup' }, /* istanbul ignore next */'Register.'))),


								/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'at-resend-verification-email-link at-wrap' },
									/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'p', /* istanbul ignore next */null, /* istanbul ignore next */'Verification email lost? ',
										/* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'a', /* istanbul ignore next */{ href: '/send-again', id: 'at-resend-verification-email', className: 'at-link at-resend-verification-email' }, /* istanbul ignore next */'Send again.'))))))));







		} }]);return ModalLogin;}( /* istanbul ignore next */_react2.default.Component); /* istanbul ignore next */ModalLogin.propTypes = { lowered: /* istanbul ignore next */_react2.default.PropTypes.bool, closeModal: /* istanbul ignore next */_react2.default.PropTypes.func }; /* istanbul ignore next */ModalLogin.defaultProps = { lowered: false }; /* istanbul ignore next */exports.default =


ModalLogin;